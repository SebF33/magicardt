import{o as m,c as g,p as G,a as U,b as d,V as H,h as W,E as z,d as A,w as c,r as w,e as i,n as R,f as y,T as _,g as k,v as M,t as v,i as j,j as C,k as Y,l as x,m as B,_ as Z,F as T,q as X,s as Q,u as K,x as N,y as J,z as $,A as ee,B as ae,C as te,D as re,G as se,H as le,I as ne,J as oe,K as ce,L as ie,M as de,N as me,O as ue,P as be,Q as ge,R as _e}from"./vendor.07cbea00.js";const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}};he();var pe="/magicardt/assets/icon.982026d5.png",fe="/magicardt/assets/pdf-file.c788b7f2.png";var S=(s,t)=>{const e=s.__vccOpts||s;for(const[a,r]of t)e[a]=r;return e};const ye={name:"Spinner"},ve=s=>(G("data-v-127db2cc"),s=s(),U(),s),De={class:"spinner-container"},we=ve(()=>d("div",{class:"half-circle-spinner mx-auto"},[d("div",{class:"circle circle-1"}),d("div",{class:"circle circle-2"})],-1)),Ce=[we];function xe(s,t,e,a,r,l){return m(),g("div",De,Ce)}var ke=S(ye,[["render",xe],["__scopeId","data-v-127db2cc"]]),Ae="/magicardt/assets/tiny-glass.6259aed8.png";const Me={name:"Card",components:{Spinner:ke,"vue-load-image":H},props:{cardDatas:Object,setDatas:Object},data(){return{cardback:"",delayShow:!1,icon:pe,isLoaded:!1,pdfFile:fe,showMagnifier:!1,tinyGlass:Ae}},created:function(){this.getCardBackUrl()},computed:{createGradientString(){let s=this.cardDatas.colors;if(s!==""){let e=s.map(l=>l==="W"?"#f3f2f9":l).map(l=>l==="U"?"#246bc6":l).map(l=>l==="B"?"#3b3b3f":l).map(l=>l==="R"?"#ce372d":l).map(l=>l==="G"?"#006744":l),a=Math.round(100/e.length),r=[];if(s.length===1)var t=`background-color: ${e}`;else{for(let n=0;n<e.length;++n)r[n]=e[n]+" "+(a*n+a)+"%",n+1==e.length&&(r[n]=e[n]+" "+(a*n+20)+"%");var t=`background-image: linear-gradient(${r})`}}else var t="background-color: transparent";return t}},methods:{addClick(){this.emitter.emit("addItemEvent")},createPdf(){var s=this.cardDatas.name+"_"+this.setDatas.code,t=this.icon,e=this.cardDatas.image_uris.art_crop,a=document.getElementById("card"),r=this.cardDatas.image_uris.png;W(a,{allowTaint:!0,useCORS:!0,scrollY:0,scrollX:0,height:600,width:1e3,scale:1.8,onclone:function(l){l.getElementById("card").style.backgroundImage="none",l.getElementById("card").style.boxShadow="none"},backgroundColor:"#fcf8e8"}).then(function(l){var n=l.width,p=l.height,h=(n+10)/2*.75,f=(p+200)/2*.75,b=h,u=p/2*.75,o=new z("","pt",[h,f]),D=l.toDataURL("image/jpeg",1),F=new Image,q=new Image,E=new Image;F.src=t,q.crossOrigin="Anonymous",q.src=e+"?not-from-cache-please",E.crossOrigin="Anonymous",E.src=r+"?not-from-cache-please",o.addImage(F,"png",192,10,96,96),o.addImage(q,"jpeg",82,130,313,228.5),o.addImage(D,"jpeg",0,400,b,u),o.addImage(E,"jpeg",14,413,156.1,217.91),o.save(s+".pdf")})},getCardBackUrl(){this.cardback=new URL("/magicardt/assets/cardback.d7e0bd7f.webp",self.location).href},setClick(){this.emitter.emit("showGalleryEvent")},handleZoom(){this.isLoaded=!0;function s(t,e){var a,r,l,n,p;if(a=document.getElementById(t),r=document.getElementsByClassName("card-magnifier-glass")[0],typeof r!="undefined"&&r!=null){let h=function(b){var u,o,D;b.preventDefault(),u=f(b),o=u.x,D=u.y,o>a.width-l/e&&(o=a.width-l/e),o<l/e&&(o=l/e),D>a.height-n/e&&(D=a.height-n/e),D<n/e&&(D=n/e),r.style.left=o-l+"px",r.style.top=D-n+"px",r.style.backgroundPosition="-"+(o*e-l+p)+"px -"+(D*e-n+p)+"px"},f=function(b){var u,o=0,D=0;return b=b||window.event,u=a.getBoundingClientRect(),o=b.pageX-u.left,D=b.pageY-u.top,o=o-window.pageXOffset,D=D-window.pageYOffset,{x:o,y:D}};r.style.backgroundImage="url('"+a.src+"')",r.style.backgroundRepeat="no-repeat",r.style.backgroundSize=a.width*e+"px "+a.height*e+"px",p=3,l=parseInt(getComputedStyle(r).width.replace(/\D/g,""))/2,n=parseInt(getComputedStyle(r).height.replace(/\D/g,""))/2,r.addEventListener("mousemove",h),a.addEventListener("mousemove",h),r.addEventListener("touchmove",h),a.addEventListener("touchmove",h)}}setTimeout(function(){s("my-card",3)},1e3)}},mounted(){setTimeout(()=>{this.delayShow=!0},1200)}},Se={id:"card"},Ie={class:"card-magnifier-container"},Te={class:"card-magnifier-glass","data-html2canvas-ignore":"true"},Le=["src","alt"],qe={key:0},Ee=["innerHTML"],Ve={key:0},Ne=["src","alt","title"],Be=["innerHTML"],Fe={key:0,class:"flavor-separator"},Oe={key:0,class:"artist font-bold"},Ge={key:0,class:"power"},Ue={key:0,class:"power"},Re=["src"],je=j("Ajouter"),Pe=["src"],He={class:"card"},We=d("div",{class:"card"},"Le chargement de l'image a \xE9chou\xE9 \u{1F615}",-1);function ze(s,t,e,a,r,l){const n=w("el-button"),p=w("Spinner"),h=w("vue-load-image");return m(),A(h,{class:"mt-14"},{image:c(()=>[i(_,{name:"el-zoom-in-center",appear:""},{default:c(()=>[e.cardDatas.mana_cost?(m(),g("div",{key:0,id:"gradient",style:R(l.createGradientString)},null,4)):y("",!0)]),_:1}),d("div",Se,[d("div",Ie,[i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[k(d("div",Te,null,512),[[M,r.showMagnifier]])]),_:1}),k(d("img",{id:"my-card",src:e.cardDatas.image_uris.png||r.cardback,onLoad:t[0]||(t[0]=(...f)=>l.handleZoom&&l.handleZoom(...f)),onError:t[1]||(t[1]=(...f)=>l.handleZoom&&l.handleZoom(...f)),alt:e.cardDatas.image_uris.png||r.cardback,class:"card-img",draggable:"false",ondragstart:"return false"},null,40,Le),[[M,r.isLoaded]])]),i(_,{name:"bounce",appear:""},{default:c(()=>[e.cardDatas.name?(m(),g("h2",qe,v(e.cardDatas.name),1)):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.mana_cost?(m(),g("p",{key:0,innerHTML:e.cardDatas.mana_cost,class:"mana-cost"},null,8,Ee)):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.type_line?(m(),g("p",Ve,v(e.cardDatas.type_line),1)):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.setDatas.icon_svg_uri?(m(),g("a",{key:0,onClick:t[2]||(t[2]=(...f)=>l.setClick&&l.setClick(...f)),class:"set-symbol cursor-pointer"},[d("img",{src:e.setDatas.icon_svg_uri,width:"32",alt:e.setDatas.name,title:e.setDatas.name,draggable:"false",ondragstart:"return false"},null,8,Ne)])):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.oracle_text?(m(),g("p",{key:0,innerHTML:e.cardDatas.oracle_text,class:"oracle-text"},null,8,Be)):y("",!0)]),_:1}),e.cardDatas.flavor_text?(m(),g("div",Fe)):y("",!0),i(_,{name:"scroll-x-transition",appear:""},{default:c(()=>[e.cardDatas.flavor_text?k((m(),g("p",{key:0,class:"flavor-text"},v(e.cardDatas.flavor_text),513)),[[M,r.delayShow]]):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.artist?(m(),g("span",Oe,"Artiste(s) : "+v(e.cardDatas.artist),1)):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.power?(m(),g("span",Ge,v(e.cardDatas.power)+"/"+v(e.cardDatas.toughness),1)):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.loyalty?(m(),g("span",Ue,"Loyaut\xE9 : "+v(e.cardDatas.loyalty),1)):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.id?(m(),A(n,{key:0,onClick:t[3]||(t[3]=f=>r.showMagnifier=!r.showMagnifier),class:"tiny-glass-btn",title:"Activer/d\xE9sactiver la loupe",color:"#837c5e","data-html2canvas-ignore":"true"},{default:c(()=>[d("img",{src:r.tinyGlass,alt:"glass",draggable:"false",ondragstart:"return false"},null,8,Re)]),_:1})):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.id?(m(),A(n,{key:0,onClick:l.addClick,class:"add-btn",color:"#837c5e","data-html2canvas-ignore":"true"},{default:c(()=>[je]),_:1},8,["onClick"])):y("",!0)]),_:1}),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[e.cardDatas.id?(m(),A(n,{key:0,onClick:l.createPdf,class:"pdf-file-btn",title:"Cr\xE9er un document PDF",color:"#837c5e","data-html2canvas-ignore":"true"},{default:c(()=>[d("img",{src:r.pdfFile,alt:"pdf",draggable:"false",ondragstart:"return false"},null,8,Pe)]),_:1},8,["onClick"])):y("",!0)]),_:1})])]),preloader:c(()=>[d("div",He,[i(p,{"animation-duration":2e3,size:60})])]),error:c(()=>[We]),_:1})}var Ye=S(Me,[["render",ze]]),Ze="/magicardt/assets/full-logo.c1ec4c33.png",Xe="/magicardt/assets/glass.a221b95f.png";const V="https://magicardt.herokuapp.com/cards",Qe={name:"Cart",props:{cardDatas:Object,setDatas:Object},data(){return{fullLogo:Ze,glass:Xe,itemName:"",items:[]}},async created(){try{const s=await C.get(V);this.items=s.data}catch(s){console.error(s)}},methods:{async addItem(){const s=await C.post(V,{card_id:this.cardDatas.id,card_image:this.cardDatas.image_uris.small,card_name:this.cardDatas.name,card_price:this.cardDatas.prices.eur===null?"N/A":this.cardDatas.prices.eur.replace(/(\.0+|0+)$/,"").replace(".",","),card_title:this.cardDatas.name+" ("+this.cardDatas.set_name+")",set_icon:this.setDatas.icon_svg_uri,set_name:this.setDatas.name});this.items=[...this.items,s.data]},openFile(s){var t=document.getElementsByClassName("el-table__body");return t[0].setAttribute("id","datatable"),Y.convert({anchor:"anchorNewApi-"+s,filename:"Magicardt",format:s,rtl:!0},[{name:"Magicardt",from:{table:"datatable"},fixValue:(e,a,r)=>e.replace(/<br>/gi,`
`).replace(/(<([^>]+)>)/gi,""),removeColumns:[0,2]}])},removeItem(s){const t=s.id;C.delete(`${V}/${t}`),this.items=this.items.filter(e=>e.id!==t)},setClick(s){this.emitter.emit("showCardFromCartEvent",s)}},mounted(){this.emitter.on("addItemEvent",()=>{this.addItem()})},setup(){const s=x([]),t=x(""),e=x(!0),a=B(()=>s.value.filter(r=>!t.value||r.card_name.toLowerCase().includes(t.value.toLowerCase())));return{Delete:Z,filterTableData:a,items:s,search:t,show:e}}},Ke={class:"mobileToWork absolute top-0 right-10"},Je=["src"],$e=["src"],ea=["onClick"],aa=["src","alt","title"],ta=["src","alt","title"];function ra(s,t,e,a,r,l){const n=w("el-table-column"),p=w("el-input"),h=w("el-button"),f=w("el-table");return m(),g(T,null,[d("div",Ke,[i(_,{name:"slide-fade",appear:""},{default:c(()=>[k(d("img",{class:"absolute left-0 z-10",src:r.fullLogo,alt:"magicardt",style:{width:"340px"},draggable:"false",ondragstart:"return false"},null,8,Je),[[M,a.show]])]),_:1}),d("a",{class:"glass-btn absolute z-10",onClick:t[0]||(t[0]=b=>a.show=!a.show),style:{width:"32.2955px"},draggable:"false",ondragstart:"return false"},[d("img",{src:r.glass,alt:"magicardt"},null,8,$e)]),i(_,{name:"el-zoom-in-top",appear:""},{default:c(()=>[k(i(f,{class:"absolute top-4",data:a.filterTableData,stripe:"","header-cell-style":{background:"#c0bc97"},"row-style":{background:"#f8f8f5"},style:{width:"440px"},"max-height":"410"},{default:c(()=>[i(n,{"min-width":"36",prop:"card_image"},{default:c(b=>[i(_,{name:"el-zoom-in-center",appear:""},{default:c(()=>[d("a",{class:"miniature rounded-sm cursor-pointer",onClick:u=>l.setClick(b.row.card_id)},[d("img",{src:b.row.card_image,alt:b.row.card_name,title:b.row.card_title,draggable:"false",ondragstart:"return false"},null,8,aa)],8,ea)]),_:2},1024)]),_:1}),i(n,{"min-width":"96",label:"Nom",prop:"card_name"}),i(n,{"min-width":"24",label:"Set",prop:"set_icon"},{default:c(b=>[i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[d("img",{class:"cursor-help",src:b.row.set_icon,alt:b.row.set_name,title:b.row.set_name,draggable:"false",ondragstart:"return false"},null,8,ta)]),_:2},1024)]),_:1}),i(n,{"min-width":"40",label:"Prix (\u20AC)",prop:"card_price",align:"right"}),i(n,{"min-width":"40",align:"right"},{header:c(()=>[i(p,{modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=b=>a.search=b),size:"small",placeholder:"Filtre"},null,8,["modelValue"])]),default:c(b=>[i(h,{size:"small",type:"danger",icon:a.Delete,onClick:u=>l.removeItem(b.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),[[M,a.show]])]),_:1})]),i(_,{name:"el-fade-in-linear",appear:""},{default:c(()=>[k(d("a",{class:"mobileToWork el-button export-btn absolute top-6 right-12",download:"Magicardt.xls",href:"#",id:"anchorNewApi-xls",onClick:t[2]||(t[2]=b=>l.openFile("xls")),draggable:"false",ondragstart:"return false"},"Export",512),[[M,a.show]])]),_:1})],64)}var sa=S(Qe,[["render",ra],["__scopeId","data-v-1133f60e"]]);const la="https://api.scryfall.com",na={name:"Gallery",props:{setDatas:Object},data(){return{cards:[]}},beforeMount(){this.cardsDatas()},methods:{cardsDatas(){C.get(`${la}/cards/search?include_extras=true&include_variations=true&order=set&q=e%3A${this.setDatas.code}&unique=prints`).then(s=>{var t=s.data.data;this.cards=t.map(e=>{var a;return{id:e.id,name:e.name,image:(a=e==null?void 0:e.image_uris)==null?void 0:a.normal}})}).catch(s=>{console.log(s)})},setClick(s){this.emitter.emit("showCardFromGalleryEvent",s)}}},P=s=>(G("data-v-120d688b"),s=s(),U(),s),oa={class:"container my-8 px-16 sm:px-8 md:px-16 lg:px-18"},ca=["src","alt"],ia={class:"text-xl font-bold"},da=P(()=>d("br",null,null,-1)),ma={class:"text-xs font-oswald"},ua=P(()=>d("br",null,null,-1)),ba={class:"text-xs font-oswald"},ga=["onClick","src","alt"];function _a(s,t,e,a,r,l){return m(),g("div",oa,[i(_,{name:"el-zoom-in-center",appear:""},{default:c(()=>[i(Q,{class:"mt-14 mb-4",elevation:"10",rounded:""},{default:c(()=>[d("img",{class:"mr-6",src:this.setDatas.icon_svg_uri,width:"50",alt:this.setDatas.name,draggable:"false",ondragstart:"return false"},null,8,ca),i(K,null,{default:c(()=>[d("span",ia,v(this.setDatas.name),1),da,d("span",ma,"Date de sortie : "+v(this.setDatas.released_at),1),ua,d("span",ba,"Nombre de cartes : "+v(this.setDatas.card_count),1)]),_:1})]),_:1})]),_:1}),i(X,{name:"bounce",tag:"div",class:"grid gap-4 sm:gap-8 grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-8"},{default:c(()=>[(m(!0),g(T,null,N(r.cards,n=>(m(),g("div",{key:n.id,class:"relative pb-3/2"},[d("img",{onClick:p=>l.setClick(n.id),src:n.image,alt:n.name,class:"card absolute object-cover rounded-lg cursor-pointer",draggable:"false",ondragstart:"return false"},null,8,ga)]))),128))]),_:1})])}var ha=S(na,[["render",_a],["__scopeId","data-v-120d688b"]]),pa="/magicardt/assets/logo.51514dfd.png";const fa={name:"Logo",data:()=>({logo:pa})},ya={class:"inline-block flex justify-center"},va={class:"w-48",href:"/magicardt/",draggable:"false",ondragstart:"return false"},Da=["src"];function wa(s,t,e,a,r,l){return m(),g("div",ya,[i(_,{name:"bounce",appear:""},{default:c(()=>[d("a",va,[d("img",{src:s.logo,alt:"logo"},null,8,Da)])]),_:1})])}var Ca=S(fa,[["render",wa],["__scopeId","data-v-05b8db65"]]);function xa(s,t,e="modelValue"){return B({get:()=>s[e],set:a=>t(`update:${e}`,a)})}const ka={props:{label:{type:String,required:!0},modelValue:String,name:{type:String,required:!0},placeholder:{type:String,default:""},successMessage:{type:String,default:""},type:{type:String,default:"text"},value:{type:String,default:""}},setup(s,{emit:t}){const{errorMessage:e,handleBlur:a,handleChange:r,meta:l}=J(s.name,void 0,{initialValue:s.value});return{errorMessage:e,handleBlur:a,handleChange:r,message:xa(s,t,"modelValue"),meta:l}}},Aa=["for"],Ma=["name","id","type","value","placeholder"];function Sa(s,t,e,a,r,l){return m(),g("div",{class:ee(["TextInput",{"has-error":!!a.errorMessage,success:a.meta.valid}])},[d("label",{for:e.name},v(e.label),9,Aa),k(d("input",{name:e.name,id:e.name,type:e.type,"onUpdate:modelValue":t[0]||(t[0]=n=>a.message=n),autocomplete:"off",value:a.message,placeholder:e.placeholder,onInput:t[1]||(t[1]=(...n)=>a.handleChange&&a.handleChange(...n)),onBlur:t[2]||(t[2]=(...n)=>a.handleBlur&&a.handleBlur(...n))},null,40,Ma),[[$,a.message]]),k(d("p",{class:"help-message"},v(a.errorMessage||e.successMessage),513),[[M,a.errorMessage||a.meta.valid]])],2)}var Ia=S(ka,[["render",Sa],["__scopeId","data-v-154884b2"]]);const I="https://api.scryfall.com",Ta=()=>({cardDatas:{artist:"",colors:"",flavor_text:"",id:"",image_uris:{png:"",border_crop:""},loyalty:"",mana_cost:"",name:"",oracle_text:"",power:"",prices:{eur:"",eur_foil:""},set:"",set_name:"",toughness:"",type_line:""},setDatas:{icon_svg_uri:"",name:""}}),La={name:"App",components:{Card:Ye,Cart:sa,Gallery:ha,Logo:Ca,Form:ae,TextInput:Ia},data(){return{cardDatas:{artist:"",colors:"",flavor_text:"",id:"",image_uris:{png:"",border_crop:""},loyalty:"",mana_cost:"",name:"",oracle_text:"",power:"",prices:{eur:"",eur_foil:""},set:"",set_name:"",toughness:"",type_line:""},currentComponent:"Card",setDatas:{icon_svg_uri:"",name:""},submitTerm:""}},methods:{reset(){Object.assign(this.$data,Ta())},showCard(s){C.get(`${I}/cards/${s}`).then(t=>{this.cardDatas=t.data,this.cardDatas.mana_cost=this.formatSymbols(this.cardDatas.mana_cost),this.cardDatas.oracle_text=this.formatOracleText(this.cardDatas.oracle_text)}).then(async()=>{await C.get(`${I}/sets/${this.cardDatas.set}`).then(t=>{this.setDatas=t.data})}).catch(t=>{console.log(t)})},showGallery(){this.selectedCardName="",this.currentComponent="Gallery"},submitForm(){this.currentComponent="Card";let s=this.setTerm,t=this.selectedCardName===""?this.searchTerm:this.selectedCardName;C.get(`${I}/cards/named`,{params:{exact:t,set:s}}).then(e=>{this.cardDatas=e.data,this.cardDatas.mana_cost=this.formatSymbols(this.cardDatas.mana_cost),this.cardDatas.oracle_text=this.formatOracleText(this.cardDatas.oracle_text)}).then(async()=>{await C.get(`${I}/sets/${this.cardDatas.set}`).then(e=>{this.setDatas=e.data})}).catch(()=>{this.onInvalidSubmit(),this.cardDatas.artist="",this.cardDatas.flavor_text="",this.cardDatas.id="",this.cardDatas.image_uris.png=this.cardback,this.cardDatas.loyalty="",this.cardDatas.mana_cost="",this.cardDatas.name="Carte inexistante \u{1F615}",this.cardDatas.oracle_text="",this.cardDatas.power="",this.cardDatas.set="",this.cardDatas.set_name="",this.cardDatas.toughness="",this.cardDatas.type_line="",this.setDatas.icon_svg_uri="",this.setDatas.name=""})}},mounted(){this.emitter.on("showCardFromGalleryEvent",s=>{this.reset(),setTimeout(()=>{this.currentComponent="Card",this.showCard(s)},500)}),this.emitter.on("showCardFromCartEvent",s=>{setTimeout(()=>{this.currentComponent="Card",this.showCard(s)},300)}),this.emitter.on("showGalleryEvent",()=>{setTimeout(()=>{this.showGallery()},100)})},setup(){const s=x([]),t=x(""),e=x(""),a=x([]),r=x("");te(async()=>{await C.get(`${I}/sets`).then(u=>{a.value=u.data.data})}),re(()=>t.value,u=>C.get(`${I}/cards/autocomplete?q=${u}`).then(o=>{s.value=o.data.data}));const l=B(()=>{if(t.value==="")return[];let u=0;return s.value.filter(o=>{if(o.toLowerCase().includes(t.value.toLowerCase())&&u<10)return u++,o})}),n=u=>{e.value=u,t.value=""};function p(u){const o=u.replace(/\n/g,"<br/>");return h(o)}function h(u){return u.replaceAll("{T}",'<abbr class="card-symbol card-symbol-T" title="Engagez ce permanent">{T}</abbr>').replaceAll("{Q}",'<abbr class="card-symbol card-symbol-Q" title="D\xE9gagez ce permanent">{Q}</abbr>').replaceAll("{E}",'<abbr class="card-symbol card-symbol-E" title="Marqueur "\xE9nergie"">{E}</abbr>').replaceAll("{CHAOS}",'<abbr class="card-symbol card-symbol-CHAOS" title="Chaos">{CHAOS}</abbr>').replaceAll("{A}",'<abbr class="card-symbol card-symbol-A" title="Marqueur "gland"">{A}</abbr>').replaceAll("{X}",'<abbr class="card-symbol card-symbol-X" title="Mana g\xE9n\xE9rique : X">{X}</abbr>').replaceAll("{Y}",'<abbr class="card-symbol card-symbol-Y" title="Mana g\xE9n\xE9rique : Y">{Y}</abbr>').replaceAll("{Z}",'<abbr class="card-symbol card-symbol-Z" title="Mana g\xE9n\xE9rique : Z">{Z}</abbr>').replaceAll("{\xBD}",'<abbr class="card-symbol card-symbol-HALF" title="Mana g\xE9n\xE9rique : \xBD">{\xBD}</abbr>').replaceAll("{0}",'<abbr class="card-symbol card-symbol-0" title="Mana : 0">{0}</abbr>').replaceAll("{1}",'<abbr class="card-symbol card-symbol-1" title="Mana g\xE9n\xE9rique : 1">{1}</abbr>').replaceAll("{2}",'<abbr class="card-symbol card-symbol-2" title="Mana g\xE9n\xE9rique : 2">{2}</abbr>').replaceAll("{3}",'<abbr class="card-symbol card-symbol-3" title="Mana g\xE9n\xE9rique : 3">{3}</abbr>').replaceAll("{4}",'<abbr class="card-symbol card-symbol-4" title="Mana g\xE9n\xE9rique : 4">{4}</abbr>').replaceAll("{5}",'<abbr class="card-symbol card-symbol-5" title="Mana g\xE9n\xE9rique : 5">{5}</abbr>').replaceAll("{6}",'<abbr class="card-symbol card-symbol-6" title="Mana g\xE9n\xE9rique : 6">{6}</abbr>').replaceAll("{7}",'<abbr class="card-symbol card-symbol-7" title="Mana g\xE9n\xE9rique : 7">{7}</abbr>').replaceAll("{8}",'<abbr class="card-symbol card-symbol-8" title="Mana g\xE9n\xE9rique : 8">{8}</abbr>').replaceAll("{9}",'<abbr class="card-symbol card-symbol-9" title="Mana g\xE9n\xE9rique : 9">{9}</abbr>').replaceAll("{10}",'<abbr class="card-symbol card-symbol-10" title="Mana g\xE9n\xE9rique : 10">{10}</abbr>').replaceAll("{11}",'<abbr class="card-symbol card-symbol-11" title="Mana g\xE9n\xE9rique : 11">{11}</abbr>').replaceAll("{12}",'<abbr class="card-symbol card-symbol-12" title="Mana g\xE9n\xE9rique : 12">{12}</abbr>').replaceAll("{13}",'<abbr class="card-symbol card-symbol-13" title="Mana g\xE9n\xE9rique : 13">{13}</abbr>').replaceAll("{14}",'<abbr class="card-symbol card-symbol-14" title="Mana g\xE9n\xE9rique : 14">{14}</abbr>').replaceAll("{15}",'<abbr class="card-symbol card-symbol-15" title="Mana g\xE9n\xE9rique : 15">{15}</abbr>').replaceAll("{16}",'<abbr class="card-symbol card-symbol-16" title="Mana g\xE9n\xE9rique : 16">{16}</abbr>').replaceAll("{17}",'<abbr class="card-symbol card-symbol-17" title="Mana g\xE9n\xE9rique : 17">{18}</abbr>').replaceAll("{18}",'<abbr class="card-symbol card-symbol-18" title="Mana g\xE9n\xE9rique : 18">{18}</abbr>').replaceAll("{19}",'<abbr class="card-symbol card-symbol-19" title="Mana g\xE9n\xE9rique : 19">{19}</abbr>').replaceAll("{20}",'<abbr class="card-symbol card-symbol-20" title="Mana g\xE9n\xE9rique : 20">{20}</abbr>').replaceAll("{100}",'<abbr class="card-symbol card-symbol-100" title="Mana g\xE9n\xE9rique : 100">{100}</abbr>').replaceAll("{1000000}",'<abbr class="card-symbol card-symbol-1000000" title="Mana g\xE9n\xE9rique : 1000000">{1000000}</abbr>').replaceAll("{\u221E}",'<abbr class="card-symbol card-symbol-INFINITY" title="Mana g\xE9n\xE9rique : \u221E">{\u221E}</abbr>').replaceAll("{W}",'<abbr class="card-symbol card-symbol-W" title="Mana blanc">{W}</abbr>').replaceAll("{U}",'<abbr class="card-symbol card-symbol-U" title="Mana bleu">{U}</abbr>').replaceAll("{B}",'<abbr class="card-symbol card-symbol-B" title="Mana noir">{B}</abbr>').replaceAll("{R}",'<abbr class="card-symbol card-symbol-R" title="Mana rouge">{R}</abbr>').replaceAll("{G}",'<abbr class="card-symbol card-symbol-G" title="Mana vert">{G}</abbr>').replaceAll("{C}",'<abbr class="card-symbol card-symbol-C" title="Mana incolore">{C}</abbr>').replaceAll("{S}",'<abbr class="card-symbol card-symbol-S" title="Mana neige">{S}</abbr>')}function f(){const u=document.querySelector(".submit-btn");u.classList.add("invalid"),setTimeout(()=>{u.classList.remove("invalid")},1e3)}const b=se(le({name:ne().nonempty("Ce champ est requis...").min(2,{message:"Saisissez 2 caract\xE8res minimum..."})}));return{formatOracleText:p,formatSymbols:h,onInvalidSubmit:f,searchCardNames:l,searchResults:s,searchTerm:t,selectCardName:n,selectedCardName:e,setsList:a,setTerm:r,validationSchema:b}}},qa={class:"inline-block container mx-auto"},Ea={key:0,class:"autocompletion w-96 rounded bg-light-color border px-3 py-3 space-y-1 absolute z-20"},Va={class:"px-1 pt-1 pb-2 font-bold border-b border-gray-200"},Na=["onClick"],Ba={key:0,class:"selected-name text-lg pt-2 absolute"},Fa=j(" Vous avez s\xE9lectionn\xE9 : "),Oa={class:"font-semibold"},Ga=d("button",{class:"submit-btn bg-primary-color cursor-pointer",type:"submit"}," Afficher ",-1);function Ua(s,t,e,a,r,l){const n=w("Cart"),p=w("Logo"),h=w("TextInput"),f=w("el-option"),b=w("el-select"),u=w("Form");return m(),A(oe,null,{default:c(()=>[i(de,{id:"main",class:"min-w-screen min-h-screen flex items-center"},{default:c(()=>[i(n,{cardDatas:r.cardDatas,setDatas:r.setDatas},null,8,["cardDatas","setDatas"]),i(p),d("div",qa,[d("div",{class:"bg-container",style:R({backgroundImage:`url(${r.cardDatas.image_uris.border_crop})`})},null,4),i(u,{id:"card-form",modelValue:r.submitTerm,"onUpdate:modelValue":t[2]||(t[2]=o=>r.submitTerm=o),onSubmit:l.submitForm,"validation-schema":a.validationSchema,onInvalidSubmit:a.onInvalidSubmit},{default:c(()=>[i(h,{modelValue:a.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=o=>a.searchTerm=o),name:"name",type:"text",label:"Nom de la carte :",placeholder:"Exemple : The Wanderer","success-message":"Bonne recherche !"},null,8,["modelValue"]),i(ce,null,{default:c(()=>[a.searchCardNames.length?(m(),g("ul",Ea,[d("li",Va," Affichage de "+v(a.searchCardNames.length)+" r\xE9sultat(s) sur "+v(a.searchResults.length),1),(m(!0),g(T,null,N(a.searchCardNames,o=>(m(),g("li",{key:o,onClick:D=>a.selectCardName(o),class:"hover:bg-lightest-primary-color p-1 cursor-pointer"},v(o),9,Na))),128))])):y("",!0)]),_:1}),i(b,{class:"sets-list font-medievalsharp absolute z-10",modelValue:a.setTerm,"onUpdate:modelValue":t[1]||(t[1]=o=>a.setTerm=o),filterable:"",clearable:"",placeholder:"Pr\xE9cisez le set (facultatif)"},{default:c(()=>[(m(!0),g(T,null,N(a.setsList,o=>(m(),A(f,{key:o.setTerm,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a.selectedCardName?(m(),g("p",Ba,[Fa,d("span",Oa,v(a.selectedCardName),1)])):y("",!0),Ga]),_:1},8,["modelValue","onSubmit","validation-schema","onInvalidSubmit"]),(m(),A(ie(r.currentComponent),{cardDatas:r.cardDatas,setDatas:r.setDatas},null,8,["cardDatas","setDatas"]))])]),_:1})]),_:1})}var Ra=S(La,[["render",Ua]]);var ja=me({theme:!1});const Pa="modulepreload",O={},Ha="/magicardt/",Wa=function(t,e){return!e||e.length===0?t():Promise.all(e.map(a=>{if(a=`${Ha}${a}`,a in O)return;O[a]=!0;const r=a.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":Pa,r||(n.as="script",n.crossOrigin=""),n.href=a,document.head.appendChild(n),r)return new Promise((p,h)=>{n.addEventListener("load",p),n.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())};async function za(){(await Wa(()=>import("./webfontloader.cd097671.js").then(function(t){return t.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}za();const Ya=_e(),L=ue(Ra);L.use(ja);L.use(be,{locale:ge});L.config.globalProperties.emitter=Ya;L.mount("#app");
