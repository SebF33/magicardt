import{o as i,c as l,p as b,a as D,b as c,V as w,r as h,d as v,w as _,n as x,e as u,t as d,f as m,g as L,h as V,u as F,i as C,v as B,j as N,F as A,k as E,l as M,m as q,q as O,s as T,x as P,y as R}from"./vendor.93f631c8.js";const U=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}};U();var g=(o,n)=>{const e=o.__vccOpts||o;for(const[t,a]of n)e[t]=a;return e};const z={name:"Spinner"},$=o=>(b("data-v-44b74a86"),o=o(),D(),o),G={class:"spinner-container"},W=$(()=>c("div",{class:"half-circle-spinner mx-auto"},[c("div",{class:"circle circle-1"}),c("div",{class:"circle circle-2"})],-1)),j=[W];function K(o,n,e,t,a,s){return i(),l("div",G,j)}var H=g(z,[["render",K],["__scopeId","data-v-44b74a86"]]);const J={name:"Card",components:{Spinner:H,"vue-load-image":w},props:{cardDatas:Object},data(){return{cardback:""}},created:function(){this.getImageUrl()},computed:{createGradientString(){var o=this.cardDatas.colors;if(o!==""){var n=o.map(r=>r==="W"?"#FDFEC2":r).map(r=>r==="U"?"#68C1F5":r).map(r=>r==="B"?"#494747":r).map(r=>r==="R"?"#F85452":r).map(r=>r==="G"?"#27B56A":r),e=Math.round(100/n.length),t=[];if(o.length===1)var a=`background-color: ${n}`;else{for(var s=0;s<n.length;++s)t[s]=n[s]+" "+(e*s+e)+"%",s+1==n.length&&(t[s]=n[s]+" "+(e*s+20)+"%");console.log(t);var a=`background-image: linear-gradient(${t})`}}else var a="background-color: transparent";return a}},methods:{getImageUrl(){this.cardback=new URL("/magicardt/assets/cardback.867c3b6a.png",self.location).href}}},Q=o=>(b("data-v-15a4d4e2"),o=o(),D(),o),X={id:"card"},Y=["src"],Z={key:0},ee={key:1},ae={key:2,class:"oracle-text"},te={key:3,class:"flavor-text"},re={key:4,class:"artist"},ne={key:5,class:"power"},se={key:6,class:"power"},oe={class:"card"},ce=Q(()=>c("div",{class:"card"},"Le chargement de l'image a \xE9chou\xE9 \u{1F615}",-1));function ie(o,n,e,t,a,s){const r=h("Spinner"),p=h("vue-load-image");return i(),v(p,null,{image:_(()=>[e.cardDatas.mana_cost?(i(),l("div",{key:0,id:"gradient",style:x(s.createGradientString)},null,4)):u("",!0),c("div",X,[c("img",{src:e.cardDatas.image_uris.png||a.cardback,width:"223",height:"310",alt:"card"},null,8,Y),e.cardDatas.name?(i(),l("h2",Z,d(e.cardDatas.name),1)):u("",!0),e.cardDatas.type_line?(i(),l("p",ee,d(e.cardDatas.type_line),1)):u("",!0),e.cardDatas.oracle_text?(i(),l("p",ae,d(e.cardDatas.oracle_text),1)):u("",!0),e.cardDatas.flavor_text?(i(),l("p",te,d(e.cardDatas.flavor_text),1)):u("",!0),e.cardDatas.artist?(i(),l("span",re,"Artiste : "+d(e.cardDatas.artist),1)):u("",!0),e.cardDatas.power?(i(),l("span",ne,d(e.cardDatas.power)+"/"+d(e.cardDatas.toughness),1)):u("",!0),e.cardDatas.loyalty?(i(),l("span",se,"Loyaut\xE9 : "+d(e.cardDatas.loyalty),1)):u("",!0)])]),preloader:_(()=>[c("div",oe,[m(r,{"animation-duration":2e3,size:60})])]),error:_(()=>[ce]),_:1})}var le=g(J,[["render",ie],["__scopeId","data-v-15a4d4e2"]]),de="/magicardt/assets/logo.51514dfd.png";const ue={name:"Logo",data:()=>({logo:de})},_e={class:"logo mb-2",href:"/magicardt/"},me=["src"];function he(o,n,e,t,a,s){return i(),v(L,{class:"text-center mt-2"},{default:_(()=>[m(V,{cols:"12"},{default:_(()=>[c("a",_e,[c("img",{src:o.logo,height:"150"},null,8,me)])]),_:1})]),_:1})}var pe=g(ue,[["render",he]]);const ge={props:{type:{type:String,default:"text"},value:{type:String,default:""},name:{type:String,required:!0},label:{type:String,required:!0},successMessage:{type:String,default:""},placeholder:{type:String,default:""}},setup(o){const{value:n,errorMessage:e,handleBlur:t,handleChange:a,meta:s}=F(o.name,void 0,{initialValue:o.value});return{handleChange:a,handleBlur:t,errorMessage:e,inputValue:n,meta:s}}},fe=["for"],ve=["name","id","type","value","placeholder"];function ye(o,n,e,t,a,s){return i(),l("div",{class:N(["TextInput",{"has-error":!!t.errorMessage,success:t.meta.valid}])},[c("label",{for:e.name},d(e.label),9,fe),c("input",{name:e.name,id:e.name,type:e.type,value:t.inputValue,placeholder:e.placeholder,onInput:n[0]||(n[0]=(...r)=>t.handleChange&&t.handleChange(...r)),onBlur:n[1]||(n[1]=(...r)=>t.handleBlur&&t.handleBlur(...r))},null,40,ve),C(c("p",{class:"help-message"},d(t.errorMessage||e.successMessage),513),[[B,t.errorMessage||t.meta.valid]])],2)}var be=g(ge,[["render",ye],["__scopeId","data-v-7a915d6a"]]);const De={name:"App",components:{Card:le,Logo:pe,Form:A,TextInput:be},data(){return{cardDatas:{artist:"",colors:"",flavor_text:"",image_uris:{png:"",border_crop:""},loyalty:"",mana_cost:"",name:"",oracle_text:"",power:"",prices:{eur:"",eur_foil:""},toughness:"",type_line:""},inputCardName:""}},methods:{submitForm(o){const n=o.name;this.axios.get("https://api.scryfall.com/cards/named",{params:{exact:n}}).then(e=>{this.cardDatas=e.data}).catch(()=>{this.onInvalidSubmit(),this.cardDatas.artist="",this.cardDatas.flavor_text="",this.cardDatas.image_uris.png=this.cardback,this.cardDatas.loyalty="",this.cardDatas.mana_cost="",this.cardDatas.name="Nom incomplet ou inexistant \u{1F615}",this.cardDatas.oracle_text="",this.cardDatas.power="",this.cardDatas.toughness="",this.cardDatas.type_line=""})}},setup(){function o(){const e=document.querySelector(".submit-btn");e.classList.add("invalid"),setTimeout(()=>{e.classList.remove("invalid")},1e3)}return{schema:E().shape({name:M().required()}),onInvalidSubmit:o}}},xe={class:"container mx-auto"},Se=c("button",{class:"submit-btn",type:"submit"},"Afficher",-1);function ke(o,n,e,t,a,s){const r=h("Logo"),p=h("TextInput"),f=h("Form"),k=h("Card");return i(),v(q,null,{default:_(()=>[m(O,null,{default:_(()=>[m(r),c("div",xe,[c("div",{class:"bg-container",style:x({backgroundImage:`url(${a.cardDatas.image_uris.border_crop})`})},null,4),m(f,{onSubmit:s.submitForm,modelValue:a.inputCardName,"onUpdate:modelValue":n[0]||(n[0]=I=>a.inputCardName=I),"validation-schema":t.schema,onInvalidSubmit:t.onInvalidSubmit},{default:_(()=>[m(p,{name:"name",type:"text",label:"Nom de la carte :",placeholder:"(Ex : The Wanderer)","success-message":"Maintenant cliquez !"}),Se]),_:1},8,["onSubmit","modelValue","validation-schema","onInvalidSubmit"]),m(k,{cardDatas:a.cardDatas},null,8,["cardDatas"])])]),_:1})]),_:1})}var Ie=g(De,[["render",ke]]);var we=T({theme:!1});const Le="modulepreload",y={},Ve="/magicardt/",Fe=function(n,e){return!e||e.length===0?n():Promise.all(e.map(t=>{if(t=`${Ve}${t}`,t in y)return;y[t]=!0;const a=t.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":Le,a||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),a)return new Promise((p,f)=>{r.addEventListener("load",p),r.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>n())};async function Ce(){(await Fe(()=>import("./webfontloader.cd097671.js").then(function(n){return n.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}Ce();const S=P(Ie).use(we);S.config.globalProperties.axios=R;S.mount("#app");
