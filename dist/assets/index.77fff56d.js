import{o as c,c as d,p as S,a as C,b as i,V as L,d as k,w as f,r as p,n as w,e as m,t as u,f as g,g as I,u as N,h as b,v as T,i as F,j as A,F as B,k as x,l as y,m as M,q,s as E,x as O,y as U,z,A as R,B as P,C as W,D as $}from"./vendor.6ef55660.js";const j=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};j();var v=(n,r)=>{const a=n.__vccOpts||n;for(const[e,t]of r)a[e]=t;return a};const G={name:"Spinner"},K=n=>(S("data-v-44b74a86"),n=n(),C(),n),H={class:"spinner-container"},J=K(()=>i("div",{class:"half-circle-spinner mx-auto"},[i("div",{class:"circle circle-1"}),i("div",{class:"circle circle-2"})],-1)),Q=[J];function X(n,r,a,e,t,s){return c(),d("div",H,Q)}var Y=v(G,[["render",X],["__scopeId","data-v-44b74a86"]]);const Z={name:"Card",components:{Spinner:Y,"vue-load-image":L},props:{cardDatas:Object},data(){return{cardback:""}},created:function(){this.getImageUrl()},computed:{createGradientString(){let n=this.cardDatas.colors;if(n!==""){let a=n.map(s=>s==="W"?"#f3f2f9":s).map(s=>s==="U"?"#246bc6":s).map(s=>s==="B"?"#3b3b3f":s).map(s=>s==="R"?"#ce372d":s).map(s=>s==="G"?"#006744":s),e=Math.round(100/a.length),t=[];if(n.length===1)var r=`background-color: ${a}`;else{for(let o=0;o<a.length;++o)t[o]=a[o]+" "+(e*o+e)+"%",o+1==a.length&&(t[o]=a[o]+" "+(e*o+20)+"%");var r=`background-image: linear-gradient(${t})`}}else var r="background-color: transparent";return r}},methods:{getImageUrl(){this.cardback=new URL("/magicardt/assets/cardback.867c3b6a.png",self.location).href}}},ee=n=>(S("data-v-832ea01a"),n=n(),C(),n),ae={id:"card"},te=["src"],re={key:0},se={key:1},ne={key:2,class:"oracle-text"},oe={key:3,class:"flavor-text"},ce={key:4,class:"artist"},ie={key:5,class:"power"},le={key:6,class:"power"},de={class:"card"},ue=ee(()=>i("div",{class:"card"},"Le chargement de l'image a \xE9chou\xE9 \u{1F615}",-1));function me(n,r,a,e,t,s){const o=p("Spinner"),l=p("vue-load-image");return c(),k(l,{class:"mt-14"},{image:f(()=>[a.cardDatas.mana_cost?(c(),d("div",{key:0,id:"gradient",style:w(s.createGradientString)},null,4)):m("",!0),i("div",ae,[i("img",{src:a.cardDatas.image_uris.png||t.cardback,width:"223",height:"310",alt:"card"},null,8,te),a.cardDatas.name?(c(),d("h2",re,u(a.cardDatas.name),1)):m("",!0),a.cardDatas.type_line?(c(),d("p",se,u(a.cardDatas.type_line),1)):m("",!0),a.cardDatas.oracle_text?(c(),d("p",ne,u(a.cardDatas.oracle_text),1)):m("",!0),a.cardDatas.flavor_text?(c(),d("p",oe,u(a.cardDatas.flavor_text),1)):m("",!0),a.cardDatas.artist?(c(),d("span",ce,"Artiste : "+u(a.cardDatas.artist),1)):m("",!0),a.cardDatas.power?(c(),d("span",ie,u(a.cardDatas.power)+"/"+u(a.cardDatas.toughness),1)):m("",!0),a.cardDatas.loyalty?(c(),d("span",le,"Loyaut\xE9 : "+u(a.cardDatas.loyalty),1)):m("",!0)])]),preloader:f(()=>[i("div",de,[g(o,{"animation-duration":2e3,size:60})])]),error:f(()=>[ue]),_:1})}var _e=v(Z,[["render",me],["__scopeId","data-v-832ea01a"]]),he="/magicardt/assets/logo.51514dfd.png";const ge={name:"Logo",data:()=>({logo:he})},pe={class:"flex justify-center"},fe={class:"w-48",href:"/magicardt/"},ve=["src"];function ye(n,r,a,e,t,s){return c(),d("div",pe,[i("a",fe,[i("img",{src:n.logo},null,8,ve)])])}var be=v(ge,[["render",ye]]);function xe(n,r,a="modelValue"){return I({get:()=>n[a],set:e=>r(`update:${a}`,e)})}const De={props:{modelValue:String,type:{type:String,default:"text"},value:{type:String,default:""},name:{type:String,required:!0},label:{type:String,required:!0},successMessage:{type:String,default:""},placeholder:{type:String,default:""}},setup(n,{emit:r}){const{value:a,errorMessage:e,handleBlur:t,handleChange:s,meta:o}=N(n.name,void 0,{initialValue:n.value});return{handleChange:s,handleBlur:t,errorMessage:e,inputValue:a,meta:o,message:xe(n,r,"modelValue")}}},Se=["for"],Ce=["name","id","type","value","placeholder"];function ke(n,r,a,e,t,s){return c(),d("div",{class:A(["TextInput",{"has-error":!!e.errorMessage,success:e.meta.valid}])},[i("label",{for:a.name},u(a.label),9,Se),b(i("input",{name:a.name,id:a.name,type:a.type,"onUpdate:modelValue":r[0]||(r[0]=o=>e.message=o),value:e.inputValue,placeholder:a.placeholder,onInput:r[1]||(r[1]=(...o)=>e.handleChange&&e.handleChange(...o)),onBlur:r[2]||(r[2]=(...o)=>e.handleBlur&&e.handleBlur(...o))},null,40,Ce),[[T,e.message]]),b(i("p",{class:"help-message"},u(e.errorMessage||a.successMessage),513),[[F,e.errorMessage||e.meta.valid]])],2)}var we=v(De,[["render",ke],["__scopeId","data-v-400a5984"]]);const Ie={name:"App",components:{Card:_e,Logo:be,Form:B,TextInput:we},data(){return{cardDatas:{artist:"",colors:"",flavor_text:"",image_uris:{png:"",border_crop:""},loyalty:"",mana_cost:"",name:"",oracle_text:"",power:"",prices:{eur:"",eur_foil:""},toughness:"",type_line:""},submitTerm:""}},methods:{submitForm(){this.searchCardNames.length=0;let n=this.selectedCardName,r=this.searchTerm;function a(){let e;return n===""?e=r:e=n,e}x.get("https://api.scryfall.com/cards/named",{params:{exact:a()}}).then(e=>{this.cardDatas=e.data}).catch(()=>{this.onInvalidSubmit(),this.cardDatas.artist="",this.cardDatas.flavor_text="",this.cardDatas.image_uris.png=this.cardback,this.cardDatas.loyalty="",this.cardDatas.mana_cost="",this.cardDatas.name="Nom incomplet ou inexistant \u{1F615}",this.cardDatas.oracle_text="",this.cardDatas.power="",this.cardDatas.toughness="",this.cardDatas.type_line=""})}},setup(){const n=y(""),r=y([]),a=y("");M(()=>n.value,l=>x.get(`https://api.scryfall.com/cards/autocomplete?q=${l}`).then(_=>{r.value=_.data.data}));const e=I(()=>{if(n.value==="")return[];let l=0;return r.value.filter(_=>{if(_.toLowerCase().includes(n.value.toLowerCase())&&l<10)return l++,_})}),t=l=>{a.value=l,n.value=""};function s(){const l=document.querySelector(".submit-btn");l.classList.add("invalid"),setTimeout(()=>{l.classList.remove("invalid")},1e3)}const o=q().shape({name:E().required()});return{searchResults:r,searchTerm:n,searchCardNames:e,selectCardName:t,selectedCardName:a,schema:o,onInvalidSubmit:s}}},Ve={class:"container mx-auto"},Le=i("button",{class:"submit-btn bg-primary-color",type:"submit"}," Afficher ",-1),Ne={key:0,class:"selected-name text-lg pt-2 absolute"},Te=P(" Vous avez s\xE9lectionn\xE9 : "),Fe={class:"font-semibold"},Ae={key:0,class:"autocompletion w-96 rounded bg-light-color border px-4 py-2 space-y-1 absolute z-10"},Be={class:"px-1 pt-1 pb-2 font-bold border-b border-gray-200"},Me=["onClick"];function qe(n,r,a,e,t,s){const o=p("Logo"),l=p("TextInput"),_=p("Form"),V=p("Card");return c(),k(O,null,{default:f(()=>[g(R,{class:"min-w-screen min-h-screen flex items-center"},{default:f(()=>[g(o),i("div",Ve,[i("div",{class:"bg-container",style:w({backgroundImage:`url(${t.cardDatas.image_uris.border_crop})`})},null,4),g(_,{modelValue:t.submitTerm,"onUpdate:modelValue":r[1]||(r[1]=h=>t.submitTerm=h),onSubmit:s.submitForm,"validation-schema":e.schema,onInvalidSubmit:e.onInvalidSubmit},{default:f(()=>[g(l,{modelValue:e.searchTerm,"onUpdate:modelValue":r[0]||(r[0]=h=>e.searchTerm=h),name:"name",type:"text",label:"Nom de la carte :",placeholder:"(Ex : The Wanderer)","success-message":"Maintenant cliquez !"},null,8,["modelValue"]),Le,e.selectedCardName?(c(),d("p",Ne,[Te,i("span",Fe,u(e.selectedCardName),1)])):m("",!0)]),_:1},8,["modelValue","onSubmit","validation-schema","onInvalidSubmit"]),e.searchCardNames.length?(c(),d("ul",Ae,[i("li",Be," Affichage de "+u(e.searchCardNames.length)+" r\xE9sultat(s) sur "+u(e.searchResults.length),1),(c(!0),d(U,null,z(e.searchCardNames,h=>(c(),d("li",{key:h,onClick:$e=>e.selectCardName(h),class:"cursor-pointer hover:bg-lighter-primary-color p-1"},u(h),9,Me))),128))])):m("",!0),g(V,{cardDatas:t.cardDatas},null,8,["cardDatas"])])]),_:1})]),_:1})}var Ee=v(Ie,[["render",qe]]);var Oe=W({theme:!1});const Ue="modulepreload",D={},ze="/magicardt/",Re=function(r,a){return!a||a.length===0?r():Promise.all(a.map(e=>{if(e=`${ze}${e}`,e in D)return;D[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const o=document.createElement("link");if(o.rel=t?"stylesheet":Ue,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t)return new Promise((l,_)=>{o.addEventListener("load",l),o.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>r())};async function Pe(){(await Re(()=>import("./webfontloader.cd097671.js").then(function(r){return r.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}Pe();const We=$(Ee).use(Oe);We.mount("#app");
